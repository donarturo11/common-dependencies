name: Build vcpkg deps

on:
  workflow_dispatch:
    inputs:
      build_packages:
        description: 'Build Packages'
        required: false
        type: string
      exec_cmd:
        description: 'Execute command'
        required: false
        type: string
env:
  # Customize the CMake build type here (Release, Debug, RelWithDebInfo, etc.)
  BUILD_TYPE: Release

jobs:
  run-windows:
    runs-on: windows-latest
    permissions:
      packages: write
    defaults:
      run:
        shell: cmd
        
    steps:
    - name: Setup
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        GHCR_URL: https://nuget.pkg.github.com/${{ env.GITHUB_REPOSITORY_OWNER }}/index.json
      run: |
           nuget sources add ^
           -Name ghcr ^
           -Source %GHCR_URL% ^
           -Username %GITHUB_REPOSITORY_OWNER% ^
           -Password %GITHUB_TOKEN% ^
           -StorePasswordInClearText
    - name: Check options
      env:
        VCPKG_BINARY_SOURCES: clear;nuget,${{ env.GHCR_URL }},readwrite
      run: set
           
    



